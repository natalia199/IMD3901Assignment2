<!DOCTYPE html>
<html>
    <head>
      <title>WebVR! - A-Frame</title>
      <meta name="description" content="Hello, WebVR! - A-Frame">
      
      <!--  note we are using 1.1.0 as most recent -->
      <script src="/js/aframe.min.js"></script>
      <script src="js/aframe-environment-component.min.js"></script>
      <!--<script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>-->
      <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
      <script src="https://unpkg.com/super-hands@^2.1.0/dist/super-hands.min.js"></script>
      <script src="https://mixedreality.mozilla.org/ammo.js/builds/ammo.wasm.js"></script>
      <script src="http://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
      
      <script>

        /*AFRAME.registerComponent('kys', {
          init: function () {
            this.el.addEventListener('click', function (evt) {
              var box = document.createElement("a-cylinder")
              box.setAttribute("position", "2 0.5 0")
              box.setAttribute("tagName", "lantern")
              box.setAttribute("color", "orange")
              box.setAttribute("height", "0.9")
              box.setAttribute("radius", "0.4")
              box.setAttribute("visible", "true")
              //box.setAttribute("animation", "property:position.y; from:0.5; to:0.8; dur: 2000; dir: alternate; easing: linear; loop: true")
              //box.setAttribute("animation__click", "property:position.y; from:0.5; to:0.8; dur: 2000; dir: alternate; easing: linear; loop: true")
              document.querySelector("a-scene").appendChild(box)
              console.log('bitch ass hoe');
            });
          }
        });

        AFRAME.registerComponent('lantern', {
      init: function() {
        this.el.addEventListener("click", (e) => {
          console.log('pls die');
        })
      }
    });

    AFRAME.registerComponent('cajaverde', {
      init: function() {
        this.el.addEventListener("click", function (evt){
          console.log('remove' );
        })
      }
    });
*/
    </script>

    </head>
    <body>

      <!-- PHYSICS 
      <a-scene physics="driver: ammo; debug: true; debugDrawMode: 1;">

        <a-entity camera position="0 1.6 5" look-controls wasd-controls></a-entity>
        
        <a-plane ammo-body="type: static" ammo-shape="type: box"
            position="0 0 -4" rotation="-90 0 0" width="8" height="8"
            color="yellow"></a-plane>
        
            <a-box ammo-body="type: dynamic" ammo-shape="type: box"
            position="0 4 -2" width="3" height="2" depth="1"
            color="red"></a-box>

        <a-box ammo-body="type:dynamic" ammo-shape="type: box" position="2 10 0" width="1" height="1" depth="1" color="black"></a-box>
      </a-scene>
-->
      <!-- DRAGGABLE -->
      <a-scene environment="preset: forest; shadow: true" physics="driver: ammo; debug: true; debugDrawMode: 1;">
        
        <a-entity progressive-controls></a-entity>
         
         <a-camera>
          <a-entity cursor position="0 0 -1"
                    geometry="primitive: sphere; radius:0.005"
                    material="color: black; shader: flat; opacity:0.5;">
                  </a-entity>
        </a-camera>

        <a-box ammo-body="type:dynamic" ammo-shape="type: box" position="0 4 -5" width="1" height="1" depth="1" color="black"></a-box>

        <a-plane ammo-body="type: static" ammo-shape="type: box"
            position="0 0 -4" rotation="-90 0 0" width="8" height="8"
            color="yellow" opacity="0"></a-plane>

      <a-box cajaverde id="cajaverde" color="white" position="-2 1 -5" height="1" width="1"
             event-set__enter="_event: mouseenter; material.color: red"
             event-set__leave="_event: mouseleave; material.color: white"
             event-set__targetCol="_event: click; _target:#green; material.color: pink;"></a-box>

      <a-box color="yellow" position="1 2 -5" clickable
             event-set__start="_event: grab-start; _target: #green; material.color: red"
             event-set__end="_event: grab-end; _target: #green; material.color: green"></a-box>       

      <a-box id="green" ammo-body="type:dynamic" ammo-shape="type: box" color="green" position="-1 2 -5" height="1" width="1" grabbable
             event-set__regcol="_event: click; material.color: red; gravity: 5"></a-box>


     <a-cylinder lantern visible="false" position="2 0.5 0" height= "0.9" radius= "0.4"></a-cylinder>

        <a-entity id="universal_button" kys>
          <a-entity class="button interactive" position="0 0.6 0" geometry="primitive:cylinder; radius:0.15; height:0.2;" material="color:rgb(255, 100, 100);" 
                    animation__mouseenter="property:material.color; type:color; to:rgb(255, 0, 0); startEvents:mouseenter; dur:200;"
                    animation__mouseleave="property:material.color; type:color; to:rgb(255, 100, 100); startEvents:mouseleave; dur:200;"
                    animation__click="property:position.y; from:0.55; to:0.6; startEvents:click; dur:300;"
                    shadow></a-entity>
          <a-entity position="0 0.3 0" geometry="primitive:box; width:0.5; depth:0.5; height:0.6;" material="color:white;" shadow></a-entity>
      </a-entity>

        </a-scene>
      
    </body>
</html>